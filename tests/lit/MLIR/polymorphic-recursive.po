; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Test recursive function with type inference via monomorphization.

; Polymorphic template function
; CHECK: {{.*}}polang.func @countdown(%{{.*}}: !polang.typevar{{.*}}) -> !polang.int{{.*}}

; Monomorphized version for int parameter
; CHECK: {{.*}}polang.func @countdown$int(%{{.*}}: !polang.int) -> !polang.int{{.*}}

; Verify recursive call in monomorphized version
; CHECK: {{.*}}polang.call @countdown$int{{.*}}

let countdown(n) = if n == 0 then 0 else countdown(n - 1)
countdown(5)
