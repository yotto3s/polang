; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Test that a polymorphic function called with different types creates
; multiple specialized versions through monomorphization.

; Specialized versions (order may vary)
; CHECK-DAG: {{.*}}polang.func @identity$i64(%{{.*}}: !polang.integer<64, signed>) -> !polang.integer<64, signed>{{.*}}
; CHECK-DAG: {{.*}}polang.func @identity$bool(%{{.*}}: !polang.bool) -> !polang.bool{{.*}}

; Original polymorphic function is preserved and marked
; CHECK-DAG: {{.*}}polang.func @identity(%{{.*}}: !polang.typevar{{.*}}) -> !polang.typevar{{.*}} attributes {polang.polymorphic}{{.*}}

let identity(x) = x
; Call with int and bool to create both specialized versions
identity(42)
identity(true)
