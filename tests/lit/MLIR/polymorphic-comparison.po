; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Test function with type inference from comparison.
; Parameter type is inferred via monomorphization at call site.

; Polymorphic template function
; CHECK: {{.*}}polang.func @is_zero(%{{.*}}: !polang.typevar{{.*}}) -> !polang.bool{{.*}}

; Monomorphized version for int parameter
; CHECK: {{.*}}polang.func @is_zero$i64(%{{.*}}: !polang.integer<64, signed>) -> !polang.bool{{.*}}

; Verify comparison operation exists in monomorphized version
; (the second operand may still be a type variable from the cloned body)
; CHECK: {{.*}}polang.cmp eq{{.*}}!polang.integer<64, signed>{{.*}}

let is_zero(x) = x == 0
is_zero(5)
