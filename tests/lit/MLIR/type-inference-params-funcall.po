; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Known function with explicit types
; CHECK: {{.*}}polang.func @double_int(%{{.*}}: !polang.integer<64, signed>) -> !polang.integer<64, signed>{{.*}}
let double_int(x: i64): i64 = x * 2

; Wrapper functions remain polymorphic until called
; CHECK: {{.*}}polang.func @wrapper(%{{.*}}: !polang.typevar{{.*}}){{.*}}polang.polymorphic{{.*}}
let wrapper(y) = double_int(y)

; Known function for double type
; CHECK: {{.*}}polang.func @half_double(%{{.*}}: !polang.float<64>) -> !polang.float<64>{{.*}}
let half_double(x: f64): f64 = x / 2.0

; Wrapper function remains polymorphic until called
; CHECK: {{.*}}polang.func @wrapper_double(%{{.*}}: !polang.typevar{{.*}}){{.*}}polang.polymorphic{{.*}}
let wrapper_double(y) = half_double(y)

; Entry point
0
