; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Test function with captured variable.
; Captured variables are passed as explicit parameters.
; Type is inferred via monomorphization at call site.

; Polymorphic template function with captured base
; CHECK: {{.*}}polang.func @add_base(%{{.*}}: !polang.typevar{{.*}}, %{{.*}}: !polang.int){{.*}}

; Monomorphized version for int parameter
; CHECK: {{.*}}polang.func @add_base$int_int(%{{.*}}: !polang.int, %{{.*}}: !polang.int) -> !polang.int{{.*}}

; Verify add operation in monomorphized version
; CHECK: {{.*}}polang.add{{.*}}!polang.int, !polang.int{{.*}}

let base = 10
let add_base(x) = x + base
add_base(5)
