; RUN: %polang_compiler --emit-mlir %s | %FileCheck %s

; Test function with captured variable.
; Captured variables are passed as explicit parameters.
; Type is inferred via monomorphization at call site.

; Polymorphic template function with captured base
; CHECK: {{.*}}polang.func @add_base(%{{.*}}: !polang.typevar{{.*}}, %{{.*}}: !polang.integer<64, signed>){{.*}}

; Monomorphized version for int parameter
; CHECK: {{.*}}polang.func @add_base$i64_i64(%{{.*}}: !polang.integer<64, signed>, %{{.*}}: !polang.integer<64, signed>) -> !polang.integer<64, signed>{{.*}}

; Verify add operation in monomorphized version
; CHECK: {{.*}}polang.add{{.*}}!polang.integer<64, signed>, !polang.integer<64, signed>{{.*}}

let base = 10
let add_base(x) = x + base
add_base(5)
